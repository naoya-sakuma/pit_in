<div class="container_fluid">
  <div class="goal_show">
    <h4 class="goal_title_in_show"><%= @goal.title %></h4>

    <ul class="list-group">
      <li class="list-group-item">期間：<%= @goal.day_to_start %>〜<%= @goal.day_to_finish %></li>
      <li class="list-group-item">目的：<%= @goal.purpose %></li>
      <li class="list-group-item">達成すると？：<%= @goal.when_succeed %></li>
      <li class="list-group-item">達成しないと？：<%= @goal.when_fail %></li>
    </ul>


    <ul class="list-group problems_list">
      <li class="list-group-item"><strong>未解決の問題</strong></li>
      <% @goal.problems.each do |problem| %>
        <% if problem.status == t('view.unsolved') %>
          <li class="list-group-item"><%= problem.title %></li>
        <% end %>
      <% end %>

      <li class="list-group-item"><strong>解決済みの問題</strong></li>
      <table border=1>
        <% @goal.problems.each do |problem| %>
          <% problem.solutions.each_with_index do |solution, solution_index|%>
            <% solution.tasks.each_with_index do |task, task_index|%>
              <tr>
                <% if solution_index == 0 && task_index == 0 %>
                  <td rowspan="<%= problem.tasks.count %>">
                    <%= problem.title %>
                  </td>
                <% end %>
                <% if task_index == 0 %>
                  <td rowspan="<%= solution.tasks.count %>">
                    <%= solution.title %>
                  </td>
                <% end %>
                <td>
                  <%= task.title %>
                </td>
              </tr>
            <% end %><!--problem-->
          <% end %><!--problem-->
        <% end %><!--problem-->
      </table>
    </ul>
  <%= link_to "一覧", goals_path, class: "btn btn-outline-secondary to_goal_index" %>
  </div>
</div>
